{% load static %}
{% load custom_filters %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{{ hotel.name }} - Premium Accommodation</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="{% static 'hotel/css/styles.css' %}" />
  </head>
  <body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg fixed-top">
      <div class="container">
        <a class="navbar-brand" href="#">
          <span class="brand-text">
            {% if hotel.hotel_logo %}
              <img src="{{ hotel.hotel_logo.url }}" alt="{{ hotel.name }} Logo" class="img-fluid me-2" style="max-height: 40px;" />
            {% endif %}
            {{ hotel.name }}</span>
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav ms-auto">
            <li class="nav-item"><a class="nav-link" href="{% url 'home' %}">Home</a></li>
            <li class="nav-item"><a class="nav-link" href="#rooms">Rooms</a></li>
            <li class="nav-item"><a class="nav-link" href="#amenities">Amenities</a></li>
            <li class="nav-item"><a class="nav-link" href="#contact">Contact</a></li>
            <li class="nav-item"><a class="nav-link btn btn-gold" href="#booking"
                                    data-bs-toggle="modal" data-bs-target="#bookingModal">Book Now</a></li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- Hero Section -->
    <section id="home" class="hero-section">
  <div class="hero-overlay"></div>
  <div class="container h-100">
    <div class="row h-100 align-items-center">
      <div class="col-lg-8 col-md-12">
        <div class="hero-content">
          <h1 class="title">Welcome to {{ hotel.name }}</h1>
          <p class="hero-subtitle">{{ hotel.description }}</p>
          <div class="hero-buttons">
            <button class="btn btn-primary btn-lg me-3" onclick="showBookingModal()">
              <i class="fas fa-calendar-check me-2"></i> Book Your Stay
            </button>
            <button class="btn btn-outline-light btn-lg me-auto">
              <i class="fas fa-play me-2"></i> Take a Tour
            </button>
          </div>
        </div>
      </div>
      <div class="col-lg-4 col-md-12">
        <div class="booking-card">
          <h4>Quick Booking</h4>
          <form method="POST" id="quickBookingForm" action="{% url 'home' %}">
            {% csrf_token %}
            <div class="row">
              <div class="col-md-6 mb-3">
                <label class="form-label">Check-in</label>
                <input type="date" name="checkin" class="form-control" id="checkin" value="{{ form_data.checkin }}" required />
              </div>
              <div class="col-md-6 mb-3">
                <label class="form-label">Check-out</label>
                <input type="date" name="checkout" class="form-control" id="checkout" value="{{ form_data.checkout }}" required />
              </div>
            </div>
            <div class="row">
              <div class="col-md-6 mb-3">
                <label class="form-label">Room Type</label>
                <select name="room_type" class="form-control" id="room_type" required>
                  <option value="">Select Room Type</option>
                  {% for room_type in room_types %}
                    <option value="{{ room_type.id }}" data-capacity="{{ room_type.capacity }}"
                            {% if form_data.room_type == room_type.id|stringformat:"s" %}selected{% endif %}>
                      {{ room_type.name }}
                    </option>
                  {% endfor %}
                </select>
              </div>
              <div class="col-md-6 mb-3">
                <label class="form-label">Guests</label>
                <input type="text" name="guest" class="form-control" id="guests" readonly
                       value="{{ form_data.guest|default:'0' }}" />
              </div>
            </div>
            <div class="row">
              <div class="col-md-6 mb-3">
                <label class="form-label">Rooms</label>
                <select name="room" class="form-control" id="rooms">
                  <option value="1" {% if form_data.room == '1' %}selected{% endif %}>1 Room</option>
                  <option value="2" {% if form_data.room == '2' %}selected{% endif %}>2 Rooms</option>
                  <option value="3" {% if form_data.room == '3' %}selected{% endif %}>3 Rooms</option>
                </select>
              </div>
            </div>
            <!-- Feedback moved here -->
            <div id="availability-feedback" class="mb-3"></div>
            <button name="form1_submit" type="submit" class="btn btn-primary w-100">
              <i class="fas fa-search me-1"></i> Check Availability
            </button>
          </form>
        </div>
      </div>
    </div>
  </div>
</section>

    <!-- Rooms Section -->
    <section id="rooms" class="rooms-section py-5">
      <div class="container">
        <div class="section-header text-center mb-5">
          <h2 class="section-title">Our Premium Rooms</h2>
          <p class="section-subtitle">Choose from our carefully curated selection of luxury accommodations</p>
        </div>
        <div class="row">
          {% for room_type in room_types %}
            <div class="col-lg-4 col-md-6 mb-4">
              <div class="room-card">
                <div class="room-image">
                  <img
                    src="{% if room_type.image %}{{ room_type.image.url }}{% else %}https://images.unsplash.com/photo-1611892440504-42a792e24d32?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80{% endif %}"
                    alt="{{ room_type.name }}"
                  />
                  <div class="room-overlay">
                    <button class="btn btn-gold" onclick="bookRoom('{{ room_type.name|slugify }}')">
                      Book Now
                    </button>
                  </div>
                </div>
                <div class="room-info">
                  <h4>{{ room_type.name }}</h4>
                  <p class="room-description">{{ room_type.description }}</p>
                  <div class="room-features">
                    {% for amenity in room_type.amenities.all %}
                      <span><i class="fas fa-{{ amenity.name|lower|replace:' ,-' }}"></i> {{ amenity.name }}</span>
                    {% empty %}
                      <span>No amenities listed</span>
                    {% endfor %}
                  </div>
                  <div class="room-price">
                    <span class="price">₦{{ room_type.display_price }}</span>
                    <span class="per-night">per night</span>
                  </div>
                </div>
              </div>
            </div>
          {% empty %}
            <p>No room types available.</p>
          {% endfor %}
        </div>
      </div>
    </section>

    <!-- Amenities Section -->
    <section id="amenities" class="amenities-section py-5 bg-light">
      <div class="container">
        <div class="section-header text-center mb-5">
          <h2 class="section-title">Hotel Amenities</h2>
          <p class="section-subtitle">Enjoy world-class facilities and services</p>
        </div>
        <div class="row">
          {% for hotel_amenity in hotel_amenities %}
          <div class="col-lg-3 col-md-6 mb-4">
            <div class="amenity-card text-center">
              <div class="amenity-icon">
                <i class="fas fa-{{ hotel_amenity.icon_name}}"></i>
              </div>
              <h5>{{ hotel_amenity.name }}</h5>
              <p>{{ hotel_amenity.description }}</p>
            </div>
          </div>
          {% endfor %}
        </div>
      </div>
    </section>

    <!-- Contact Section -->
    <section id="contact" class="contact-section py-5">
    <div class="container">
    <div class="row">
      <div class="col-lg-6">
        <h2>Get in Touch</h2>
        <p class="lead">Ready to experience luxury? Contact us for reservations and inquiries.</p>
        <div class="contact-info">
          <div class="contact-item">
            <i class="fas fa-map-marker-alt"></i>
            <span>{{ hotel.address }}</span>
          </div>
          <div class="contact-item">
            <i class="fas fa-phone"></i>
            <span>{{ hotel.contact_phone }}</span>
          </div>
          <div class="contact-item">
            <i class="fas fa-envelope"></i>
            <span>{{ hotel.contact_email }}</span>
          </div>
        </div>
      </div>
      <div class="col-lg-6">
        <form id="contactForm" method="POST">
          {% csrf_token %}
          <div class="row">
            <div class="col-md-6 mb-3">
              <input type="text" name="name" class="form-control" placeholder="Your Name" required />
            </div>
            <div class="col-md-6 mb-3">
              <input type="email" name="email" class="form-control" placeholder="Your Email" required />
            </div>
          </div>
          <div class="mb-3">
            <input type="text" name="subject" class="form-control" placeholder="Subject" required />
          </div>
          <div class="mb-3">
            <textarea name="message" class="form-control" rows="5" placeholder="Your Message" required></textarea>
          </div>
          <div id="contact-feedback" class="mb-3"></div>
          <button type="submit" class="btn btn-primary w-100">Send Message</button>
        </form>
      </div>
    </div>
  </div>
</section>

    <!-- Footer -->
    <footer class="footer bg-dark text-light py-4">
      <div class="container">
        <div class="row">
          <div class="col-md-6">
            <h5>
              {% if hotel.hotel_logo %}
                <img src="{{ hotel.hotel_logo.url }}" alt="{{ hotel.name }} Logo" height="24" class="me-2">
              {% else %}
                <i class="fas fa-crown me-2"></i>
              {% endif %}
              {{ hotel.name }}
            </h5>
            <p>{{ hotel.description|truncatechars:60 }}</p>
          </div>
          <div class="col-md-6 text-md-end">
            <div class="social-links">
              <a href="#"><i class="fab fa-facebook"></i></a>
              <a href="#"><i class="fab fa-twitter"></i></a>
              <a href="#"><i class="fab fa-instagram"></i></a>
              <a href="#"><i class="fab fa-linkedin"></i></a>
            </div>
            <p class="mt-3">© {% now "Y" %} {{ hotel.name }}. All rights reserved.</p>
          </div>
        </div>
      </div>
    </footer>

    <!-- Booking Modal -->
<div class="modal fade" id="bookingModal" tabindex="-1" aria-labelledby="bookingModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="bookingModalLabel">Complete Your Booking</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form id="fullBookingForm" method="POST">
          <div class="row">
            <div class="col-md-6 mb-3">
              <label class="form-label">First Name</label>
              <input type="text" class="form-control" id="modalFirstName" required />
            </div>
            <div class="col-md-6 mb-3">
              <label class="form-label">Last Name</label>
              <input type="text" class="form-control" id="modalLastName" required />
            </div>
          </div>
          <div class="row">
            <div class="col-md-6 mb-3">
              <label class="form-label">Email</label>
              <input type="email" class="form-control" id="modalEmail" required />
            </div>
            <div class="col-md-6 mb-3">
              <label class="form-label">Phone</label>
              <input type="tel" class="form-control" id="modalPhone" required />
            </div>
          </div>
          <div class="row">
            <div class="col-md-6 mb-3">
              <label class="form-label">Check-in Date</label>
              <input type="date" class="form-control" id="modalCheckin" required />
            </div>
            <div class="col-md-6 mb-3">
              <label class="form-label">Check-out Date</label>
              <input type="date" class="form-control" id="modalCheckout" required />
            </div>
          </div>
          <div class="row">
            <div class="col-md-4 mb-3">
              <label class="form-label">Room Type</label>
              <select class="form-control" id="roomType" required>
                <option value="">Select Room</option>
                {% for room_type in room_types %}
                  <option value="{{ room_type.name|slugify }}">{{ room_type.name }} - ${{ room_type.base_price }}/night</option>
                {% endfor %}
              </select>
            </div>
            <div class="col-md-4 mb-3">
              <label class="form-label">Guests</label>
              <select class="form-control" id="modalGuests" required>
                <option value="1">1 Guest</option>
                <option value="2">2 Guests</option>
                <option value="3">3 Guests</option>
                <option value="4">4 Guests</option>
              </select>
            </div>
            <div class="col-md-4 mb-3">
              <label class="form-label">Rooms</label>
              <select class="form-control" id="modalRooms" required>
                <option value="1">1 Room</option>
                <option value="2">2 Rooms</option>
                <option value="3">3 Rooms</option>
              </select>
            </div>
          </div>
          <div class="mb-3">
            <label class="form-label">Special Requests</label>
            <textarea class="form-control" id="modalSpecialRequests" rows="3" placeholder="Any special requests or notes..."></textarea>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-primary">Complete Booking</button>
      </div>
    </div>
  </div>
</div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
    window.availabilityCheckUrl = "{% url 'check_availability_ajax' %}";
    window.contactSubmitUrl = "{% url 'contact_submit' %}";
    </script>
    <script src="{% static 'hotel/js/contact_form.js' %}"></script>
    <script src="{% static 'hotel/js/script.js' %}"></script>
  </body>
</html>